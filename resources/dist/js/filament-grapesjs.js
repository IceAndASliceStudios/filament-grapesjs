document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:c,statePath:w,readOnly:B,tools:y,minHeight:j,container:n,plugins:r,settings:d})=>({instance:null,state:c,tools:y,plugins:r,settings:d,init(){let C={},S={height:j+"px",container:n||".filament-grapesjs .grapesjs-wrapper",showOffsets:!0,fromElement:!0,noticeOnUnload:!1,storageManager:!1,loadHtml:c,plugins:r,...d};this.instance=grapesjs.init(S);let s=this.instance.Panels,a=this.instance.Modal,p=this.instance.Commands;p.add("canvas-clear",function(){confirm("Are you sure to clean the canvas?")&&(this.instance.runCommand("core:canvas-clear"),setTimeout(function(){localStorage.clear()},0))});let m="gjs-mdl-dialog-sm",g=document.getElementById("info-panel");p.add("open-info",function(){let t=document.querySelector(".gjs-mdl-dialog");t.className+=" "+m,g.style.display="block",a.setTitle("About this demo"),a.setContent(g),a.open(),a.getModel().once("change:open",function(){t.className=t.className.replace(m,"")})}),s.addButton("options",{id:"open-info",className:"fa fa-question-circle",command:function(){this.instance.runCommand("open-info")},attributes:{title:"About","data-tooltip-pos":"bottom"}}),[["sw-visibility","Show Borders"],["preview","Preview"],["fullscreen","Fullscreen"],["export-template","Export"],["undo","Undo"],["redo","Redo"],["gjs-open-import-webpage","Import"],["canvas-clear","Clear canvas"]].forEach(function(t){s.getButton("options",t[0]).set("attributes",{title:t[1],"data-tooltip-pos":"bottom"})}),[["open-sm","Style Manager"],["open-layers","Layers"],["open-blocks","Blocks"]].forEach(function(t){s.getButton("views",t[0]).set("attributes",{title:t[1],"data-tooltip-pos":"bottom"})});let u=document.querySelectorAll("*[title]");for(let t=0;t<u.length;t++){let o=u[t],e=o.getAttribute("title");if(e=e?e.trim():"",!e)break;o.setAttribute("data-tooltip",e),o.setAttribute("title","")}this.instance.on("storage:load",function(t){console.log("Loaded ",t)}),this.instance.on("storage:store",function(t){console.log("Stored ",t)}),this.instance.on("load",function(){let t=grapesjs.$;s.getButton("options","sw-visibility").set({command:"core:component-outline",active:!0});let o=document.querySelector(".gjs-logo-cont");document.querySelector(".gjs-logo-version").innerHTML="v"+grapesjs.version,document.querySelector(".gjs-pn-commands").appendChild(o);let f=s.getButton("views","open-tm");f&&f.set("active",1);let h=s.getButton("views","open-sm");h&&h.set("active",1),s.removeButton("views","open-tm");let l=t('<div class="gjs-sm-sector no-select"><div class="gjs-sm-sector-title"><span class="icon-settings fa fa-cog"></span> <span class="gjs-sm-sector-label">Settings</span></div><div class="gjs-sm-properties" style="display: none;"></div></div>'),v=l.find(".gjs-sm-properties");v.append(t(".gjs-traits-cs")),t(".gjs-sm-sectors").before(l),l.find(".gjs-sm-sector-title").on("click",function(){let i=v.get(0).style;i.display=="none"?i.display="block":i.display="none"});let b=this.instance.Panels.getButton("views","open-blocks");b&&b.set("active",1),t(n||".filament-grapesjs .grapesjs-wrapper").append(t(".ad-cont"))}),this.instance.on("update",t=>{let e=this.instance.getHtml({cleanId:!0}).match(/<body\b[^>]*>([\s\S]*?)<\/body>/);e?this.state=e[1]:this.state=this.instance.getHtml()})}}))});
